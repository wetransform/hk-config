/*
  Default configuration with tools that work for most repos.
*/

amends "../Config.pkl"
import "../Builtins.pkl"
import "../Shared.pkl"

local linters = new Mapping<String, Step> {
  // use prettier, in this case mainly intended for config files like JSON, YAML, etc.
  ["prettier"] = Shared.prettier

  // pkl file linter
  ["pkl"] = Shared.pkl

  // actionlint for GitHub Actions workflow files
  ["actionlint"] = Shared.actionlint
}

hooks {
  ["pre-commit"] {
    fix = true    // automatically modify files with available linter fixes
    stash = "git" // stashes unstaged changes while running fix steps
    steps = linters
  }
  // instead of pre-commit, you can instead define pre-push hooks
  ["pre-push"] {
    steps = linters
  }
  // "fix" and "check" are special steps for `hk fix` and `hk check` commands
  ["fix"] {
    fix = true
    steps = linters
  }
  ["check"] {
    steps = linters
  }
}

